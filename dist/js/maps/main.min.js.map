{"version":3,"sources":["main.js"],"names":["Box","[object Object]","box","Door","door","left","this","dom","transform","translateZ","rotateX","rebuildDom","style","_constructTransform","opened","readyState","rotateY","rotateZ","scaleY","scaleX","scaleZ","translateX","translateY","window","innerHeight","leftDoor","querySelector","rightDoor","setBox","SetItem","setItem","position","dataset","rotate","scale","superset","supersetBox","SupersetItem","pos","split","Number","amount","minItemWidth","Math","max","PI","min","innerWidth","addEventListener","transition","bind","once","closest","dispatchEvent","Event","items","e","rotateItems","querySelectorAll","forEach","item","index","array","push","length","takePosition","revert","requestAnimationFrame","move","out","in","targetElem","trans","switchItems","displayFullView","collapseFullView","bubbles","target","targ","find","cur","switchPositionWith","matches","classList","add","remove","close","initiateJumps","open","flyOut","flyIn","closeBoxListener","groundSwing","_animate","timing","timeFraction","pow","cos","draw","progress","_deformate","duration","grounding","fallDown","_translateY","flyUp","accelerate","apply","transformOrigin","setTimeout","jump","sc","scaleNew","y","x","z","maxY","minY","abs","event","start","performance","now","animate","time","document","getElementById","evt","firstTouch","touches","originalEvent","getTouches","xDown","clientX","yDown","clientY","xUp","yUp","xDiff","yDiff","alignmentToNav","checked","getTimeStringFromTo","dateObjFrom","dateObjTo","Date","years","months","from","getTime","to","getDate","setDate","getMonth","setMonth","getFullYear","setFullYear","jobs","rembud","cpi","rembudStartDate","cpiStartDate","innerHTML","addTimeToEmployments","img","imgClass","naturalWidth","naturalHeight","input","value","slides","h","offsetWidth","tan","slide","i","cssText","right","rotationAngle","rotationStep","onclick","myCarosel","scrollTimeout","sections","hui","styleSheets","rules","cssRules","styleBySelector","selectorText","changeScrollbarColor","height","documentElement","clientHeight","scrollHeight","pageYOffset","sectionCounter","getBoundingClientRect","bottom","backgroundColor","scrollbar","clearTimeout","passive"],"mappings":"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","file":"../main.min.js","sourcesContent":["(()=>{\n    'use strict';\n\n    {\n        class Box{\n            constructor(box){\n        \n                class Door{\n                    constructor(door, left = true){\n                        this.left = left;\n                        this.dom = door;\n                        this.transform = {\n                            translateZ: left ? 0 : -100,\n                            rotateX: left ? 270 : 90 //- closed 270 / 90 (open = 60 / 300) \n                        }\n        \n                        this.rebuildDom();\n                    }\n                    \n                    _constructTransform(){\n                        return `translateZ(${this.transform.translateZ}px) rotateX(${this.transform.rotateX}deg)`;\n                    }\n        \n                    rebuildDom(){\n                        this.dom.style.transform = `${this._constructTransform()}`;\n                    }\n        \n                    open(){\n                        this.transform.rotateX = this.left ? 60 : 300;\n                        this.rebuildDom();\n                    }\n        \n                    close(){\n                        this.transform.rotateX = this.left ? 270 : 90;\n                        this.rebuildDom();\n                    }\n                }\n        \n                class SetBox{\n        \n                    constructor(setBox){\n                        \n                        class SetItem{\n        \n                            constructor(setItem, position){\n        \n                                class SupersetBox{\n        \n                                    constructor(supersetBox){\n                                        \n                                        class SupersetItem{\n                        \n                                            constructor(setItem, position){\n                                                this.dom = setItem;\n                                                this.dom.dataset.position = position;\n                                                this.transform = {\n                                                    rotate: 0,\n                                                    scale: 1,\n                                                    translateY: 0\n                                                }\n                                            }\n                                \n                                            \n                                            _constructTransform(){\n                                                return `rotateZ(${this.transform.rotate}deg) translateY(-${this.transform.translateY}px) scale(${this.transform.scale})`;\n                                            }\n                                \n                                            rebuildDom(){\n                                                this.transform.rotate = this.transform.rotate >= 360 ? this.transform.rotate - 360 : this.transform.rotate;\n                        \n                                                this.dom.style.transform = `${this._constructTransform()}`;\n                                                this.dom.querySelector('.superset__skill-box').style.transform = `rotate(-${this.transform.rotate}deg) `;\n                                            }\n                                \n                                            takePosition(){\n                        \n                                                let pos = this.dom.dataset.position.split('-');\n                                                this.position = Number(pos[0]);\n                                                this.amount = Number(pos[1]);\n                        \n                                                if(this.position != 0){\n        \n                                                    let minItemWidth = 70;\n                                                    \n                                                    this.transform.translateY = Math.max(this.amount * minItemWidth / (2 * Math.PI), Math.min(window.innerWidth * 0.4, window.innerHeight * 0.3));\n                                                    this.transform.scale = 1;\n                                                    \n                                                    this.dom.addEventListener('transitionend', function(){\n                                                        this.dom.style.transition = \"none\";\n                                                        this.dom.querySelector('.superset__skill-box').style.transition = \"none\";\n                                                    }.bind(this),{once: true});\n                                                    \n                                                } else {\n        \n                                                    let minItemWidth = 70;\n                                                    \n                                                    this.transform.translateY = Math.max(this.amount * minItemWidth / (2 * Math.PI), Math.min(window.innerWidth * 0.4, window.innerHeight * 0.3));\n                                                    this.transform.scale = 1;\n                                                    \n                                                    this.dom.addEventListener('transitionend', function(){\n                                                        this.dom.style.transition = \"none\";\n                                                        this.dom.querySelector('.superset__skill-box').style.transition = \"none\";\n                                                        this.dom.closest('.superset__box').dispatchEvent(new Event('rotatesupersetitems'));\n                                                    }.bind(this),{once: true});\n                                                }\n                                                \n                                                this.transform.rotate = 360 / this.amount * this.position;\n                        \n                                                this.rebuildDom();\n                                            }\n                                \n                                            revert(){\n                                                this.dom.style.transition = \"\";\n                                                \n                                                this.transform.scale = 0;\n                                                this.transform.translateY = 0;\n                                                this.transform.rotate = 0;\n                        \n                                                this.rebuildDom();\n                                            }\n                                        }\n                        \n                                        this.dom = supersetBox;\n                                        this.transform = {\n                        \n                                            translateY: 0,\n                                            rotate: 0,\n                                            scale: 0.1\n                                        }\n                        \n                                        this.items = [];\n                        \n                                        this.dom.addEventListener('rotatesupersetitems', function(e){\n                                            this.rotateItems();\n                                        }.bind(this))\n                        \n                                        this.dom.querySelectorAll('.superset__item').forEach(function(item, index, array){\n                                            this.items.push(new SupersetItem(item, `${index}-${array.length}`));\n                                        }.bind(this));\n        \n                                        this.rebuildDom();\n                                    }\n                                    \n                                    _constructTransform(){\n                                        return `rotate(${this.transform.rotate}deg) translateY(${this.transform.translateY}px) scale(${this.transform.scale})`;\n                                    }\n                        \n                                    rebuildDom(){\n                                        this.dom.style.transform = `${this._constructTransform()}`;\n                                    }\n        \n                                    out(){\n                                        // console.log(this.items);\n                                        this.transform.scale = 0.8;\n        \n                                        let minItemWidth = 70;\n                                                    \n                                        this.transform.translateY = Math.max(this.items.length * minItemWidth / (2 * Math.PI), Math.min(window.innerWidth * 0.4, window.innerHeight * 0.3)) - window.innerHeight * 0.2;\n        \n                                        this.items.forEach(item=>item.takePosition());\n                                        this.rebuildDom();\n                                    }\n                        \n                                    in(){\n                        \n                                        this.rotate = false;\n                                        this.transform.scale = 0.1;\n                                        this.transform.translateY = 0;\n                                        this.items.forEach(item=>item.revert());\n                                        this.rebuildDom();\n                                    }\n                        \n                                    rotateItems(){\n                                        this.rotate = true;\n                                        let step = 0.2;\n                                        requestAnimationFrame(function move(){\n                        \n                                            if(!this.rotate) return;\n                        \n                                            this.items.forEach(item=>{\n                                                item.transform.rotate += step;\n                                                item.rebuildDom();\n                                            });\n                        \n                                            requestAnimationFrame(move.bind(this));\n                                        }.bind(this));\n                                    }\n                                }\n        \n        \n                                this.dom = setItem;\n                                this.dom.dataset.position = position;\n                                this.transform = {\n                                    translateZ: 0,\n                                    rotate: 0,\n                                    scale: 1,\n                                    translateY: 0\n                                }\n                                this.superset = new SupersetBox(this.dom.querySelector('.superset__box'))\n                            }\n                \n                            \n                            _constructTransform(){\n                                return `translateY(${this.transform.translateY}px) rotateY(${this.transform.rotate}deg) translateZ(${this.transform.translateZ}px) scale(${this.transform.scale})`;\n                            }\n                \n                            rebuildDom(){\n                                this.transform.rotate = this.transform.rotate >= 360 ? this.transform.rotate - 360 : this.transform.rotate;\n        \n                                this.dom.style.transform = `${this._constructTransform()}`;\n                                this.dom.querySelector('.diamond').style.transform = `rotateY(-${this.transform.rotate}deg) `;\n                            }\n                \n                            takePosition(){\n        \n                                let pos = this.dom.dataset.position.split('-');\n                                this.position = Number(pos[0]);\n                                this.amount = Number(pos[1]);\n        \n                                if(this.position != 0){\n                                    \n                                    this.transform.translateZ = Math.max(Math.min(100, window.innerWidth * 0.2), 75);\n                                    this.transform.scale = 1;\n                                    this.transform.translateY = 0;\n                                    \n                                    this.dom.addEventListener('transitionend', function(){\n                                        this.dom.style.transition = \"none\";\n                                        this.dom.querySelector('.diamond').style.transition = \"none\";\n                                    }.bind(this),{once: true});\n                                    \n                                } else {\n        \n                                    this.transform.translateZ = 0;\n                                    this.transform.scale = 1.25;\n                                    this.transform.translateY = -70;\n        \n                                    this.dom.addEventListener('transitionend', function(){\n                                        this.dom.style.transition = \"none\";\n                                        this.dom.querySelector('.diamond').style.transition = \"none\";\n                                        this.dom.closest('.set__box').dispatchEvent(new Event('rotateitems'));\n                                        this.superset.out();\n                                    }.bind(this),{once: true});\n                                }\n                                \n                                this.transform.rotate = 360 / this.amount * this.position;\n        \n                                this.rebuildDom();\n                            }\n                \n                            revert(){\n        \n                                this.superset.in();\n        \n                                this.dom.style.transition = \"\";\n                                this.dom.querySelector('.diamond').style.transition = ``;\n                                \n                                this.transform.translateZ = 0;\n                                this.transform.scale = 1;\n                                this.transform.translateY = 0;\n                                this.transform.rotate = 0;\n        \n                                this.rebuildDom();\n                            }\n        \n                            switchPositionWith(targetElem){\n                                this.dom.style.transition = \"\";\n                                targetElem.dom.style.transition = \"\";\n                                targetElem.dom.querySelector('.diamond').style.transition = ``;\n                                this.dom.querySelector('.diamond').style.transition = ``;\n        \n                                this.superset.in();\n                                this.superset.dom.addEventListener('transitionend', function(e){\n        \n                                    if(targetElem.transform.rotate < 180) targetElem.transform.rotate += 360;\n        \n                                    let trans = targetElem.transform,\n                                        pos = targetElem.position;\n        \n                                    targetElem.transform = this.transform;\n                                    targetElem.dom.querySelector('.diamond').style.transform = `rotateY(-${targetElem.transform.rotate}deg) `;\n                                    targetElem.position = this.position;\n        \n                                    this.transform = trans;\n                                    this.position = pos;\n                                    this.dom.querySelector('.diamond').style.transform = `rotateY(-${this.transform.rotate}deg) `;\n        \n                                    targetElem.dom.addEventListener('transitionend', function(){\n        \n                                        targetElem.dom.style.transition = \"none\";\n                                        this.dom.style.transition = \"none\";\n                                        targetElem.dom.querySelector('.diamond').style.transition = \"none\";\n                                        this.dom.querySelector('.diamond').style.transition = \"none\";\n        \n                                        targetElem.dom.closest('.set__box').dispatchEvent(new Event('rotateitems'));\n                                        targetElem.superset.out();\n        \n                                    }.bind(this),{once: true});\n        \n                                    this.rebuildDom();\n                                    targetElem.rebuildDom();\n                                    \n                                }.bind(this),{once: true});\n                            }\n                        }\n        \n                        this.dom = setBox;\n                        this.transform = {\n        \n                            translateY: 0,\n                            scale: 1\n                        }\n        \n                        this.rebuildDom();\n        \n                        this.items = [];\n                        this.readyState = false;\n        \n                        this.dom.addEventListener('rotateitems', function(e){\n                            this.rotateItems();\n                        }.bind(this))\n        \n                        this.dom.querySelectorAll('.set__item').forEach(function(item, index, array){\n                            this.items.push(new SetItem(item, `${index}-${array.length - 1}`));\n                        }.bind(this));\n        \n                        this.dom.addEventListener('click', this.switchItems.bind(this));\n                    }\n                    \n                    _constructTransform(){\n                        return `translateY(${this.transform.translateY}px) scale(${this.transform.scale})`;\n                    }\n        \n                    rebuildDom(){\n                        this.dom.style.transform = `${this._constructTransform()}`;\n                    }\n        \n                    flyOut(){\n        \n                        this.dom.addEventListener('transitionend', function(){\n                            this.displayFullView();\n                        }.bind(this), {once: true});\n        \n                        this.transform.translateY = -window.innerHeight * 0.2;\n                        this.transform.scale = 1.5;\n                        this.rebuildDom();\n                    }\n        \n                    flyIn(){\n                        this.collapseFullView();\n                        this.transform.translateY = 0;\n                        this.transform.scale = 1;\n                        this.rebuildDom();\n                    }\n        \n                    displayFullView(){\n                        // console.log(this.items);\n                        this.items.forEach(item=>item.takePosition());\n        \n                        \n                    }\n        \n                    collapseFullView(){\n        \n                        this.rotate = false;\n                        this.items.forEach(item=>item.revert());\n                        \n                    }\n        \n                    rotateItems(){\n                        this.dom.dispatchEvent(new Event('boxopened',{bubbles: true}), );\n                        this.readyState = true;\n                        this.rotate = true;\n                        let step = 0.5;\n                        requestAnimationFrame(function move(){\n        \n                            if(!this.rotate) return;\n        \n                            this.items.forEach(item=>{\n                                if(item.position == 0) return;\n                                item.transform.rotate += step;\n                                item.rebuildDom();\n                            });\n        \n                            requestAnimationFrame(move.bind(this));\n                        }.bind(this));\n                    }\n        \n                    switchItems(e){\n                        if(!e.target.closest('.set__item')) return;\n        \n                        if(!this.readyState) return;\n        \n                        \n                        let targ = this.items.find(item=>item.dom == e.target.closest('.set__item')),\n                        cur = this.items.find(item=>item.position == 0);\n                        \n                        if(targ == cur) return;\n                        \n                        this.readyState = false;\n                        this.rotate = false;\n        \n                        cur.switchPositionWith(targ);\n                    }\n                }\n        \n                this.dom = box;\n                this.opened = false;\n                this.readyState = true;\n                this.transform = {\n                    rotateX : 0,    //-20\n                    rotateY : -80,\n                    rotateZ :  0,\n                    scaleY :  1,\n                    scaleX :  1,\n                    scaleZ :  1,\n                    translateX :  0,\n                    translateY :  window.innerHeight * 0.4,\n                    translateZ :  0,\n                };\n                this.leftDoor = new Door(this.dom.querySelector('.box__side--top-left'));\n                this.rightDoor = new Door(this.dom.querySelector('.box__side--top-right'), false);\n                this.setBox = new SetBox(this.dom.querySelector('.set__box'));\n        \n                this.dom.addEventListener('click', function(e){\n                    if(!e.target.matches('.box__side')) return;\n                    if(!this.readyState) return;\n                    if(this.opened == false){\n                        this.opened = true;\n                        this.dom.classList.add('box--opened');\n                    } else{\n                        this.dom.classList.remove('box--opened');\n                        this.close();\n                    }\n                    this.readyState = false;\n                    \n                }.bind(this));\n        \n                this.dom.addEventListener('boxopened', function(e){\n                    this.readyState = true;\n                }.bind(this));\n        \n                this.rebuildDom();\n                \n                this.initiateJumps();\n            }\n        \n            rebuildDom(){\n        \n                this.dom.style.transform = `${this._constructTransform()}`;\n            }\n        \n            open(){\n                this.leftDoor.open();\n                \n                this.rightDoor.dom.addEventListener('transitionend', function(){\n        \n                    this.setBox.flyOut();\n        \n                }.bind(this), {once: true});\n                \n                this.rightDoor.open();\n            }\n        \n            close(){\n                \n                this.setBox.flyIn();\n        \n                this.setBox.dom.addEventListener('transitionend', function closeBoxListener(e){       \n                    if(e.target != this.setBox.dom){\n                        this.setBox.dom.addEventListener('transitionend', closeBoxListener.bind(this), {once: true});\n                        return;\n                    }\n                    this.leftDoor.close();\n                    this.rightDoor.close();\n                }.bind(this), {once: true});\n                \n        \n                this.leftDoor.dom.addEventListener('transitionend', function(e){\n                    this.opened = false;\n                    this.readyState = true;\n                    this.initiateJumps();\n                }.bind(this), {once: true});\n            }\n        \n            jump(){\n                \n                let speed = 20;\n        \n                this.dom.addEventListener('preparedToJump', function (e){\n                    // console.log('prepared to jump!');\n        \n                    accelerate.apply(this);\n        \n                }.bind(this), {once: true});\n        \n                this.dom.addEventListener('accelerated', function (e){\n                    // console.log('accelerated!');\n                    flyUp.apply(this);\n                    this.dom.style.transformOrigin = \"center center -50px\";\n        \n                }.bind(this), {once: true});\n        \n                this.dom.addEventListener('flyedUp', function (e){\n                    // console.log('flyedUp!');\n        \n                    this.dom.style.transformOrigin = \"\";\n                    fallDown.apply(this);\n        \n                }.bind(this), {once: true});\n        \n                this.dom.addEventListener('falledDown', function (e){\n                    // console.log('falledDown!');\n        \n                    grounding.apply(this);\n        \n                }.bind(this), {once: true});\n        \n                this.dom.addEventListener('grounded', function (e){\n                    // console.log('grounded!');\n        \n                    groundSwing.apply(this);\n        \n                }.bind(this), {once: true});\n        \n                this.dom.addEventListener('groundSwinged', function (e){\n                    // console.log('All Done!');\n                    this.initiateJumps();\n                }.bind(this), {once: true});\n        \n                \n                prepareToJump.apply(this);\n        \n        \n                // functions\n        \n        \n                function groundSwing(){\n        \n        \n                    let timing  = function (timeFraction){\n        \n                            let x = 1.5;\n        \n                            timeFraction = 1 - timeFraction;\n                            //linear\n                            return Math.pow(2, 10 * (timeFraction - 1)) * Math.cos(20 * Math.PI * x / 3 * timeFraction);\n                        },\n        \n                        draw = (progress)=>{this._deformate(1 - progress);};\n        \n        \n                    this._animate({\n                        timing: timing,\n                        draw,\n                        duration: 100 * speed,\n                    }, new Event('groundSwinged'));\n                }\n        \n                function grounding(){\n        \n                    \n                    let timing  = function (timeFraction){\n        \n                        return 1-(--timeFraction)*timeFraction*timeFraction*timeFraction;\n                    },\n        \n                    draw = (progress)=>{this._deformate(1 - progress);};\n        \n        \n                    this._animate({\n                        timing: timing,\n                        draw,\n                        duration: 10 * speed,\n                    }, new Event('grounded'));\n                }\n        \n                function fallDown(){\n        \n                    let timing  = function (timeFraction){\n        \n                            return timeFraction*timeFraction*timeFraction;\n                        },\n        \n                        draw = (progress)=>{this._translateY(1 - progress);};\n        \n        \n                    this._animate({\n                        timing: timing,\n                        draw,\n                        duration: 50 * speed,\n                    }, new Event('falledDown'));\n                }\n        \n                function flyUp(){\n        \n                    let timing  = function (timeFraction){\n        \n                            return (--timeFraction)*timeFraction*timeFraction+1;\n                        },\n        \n                        draw = (progress)=>{\n                            this._translateY(progress);\n                        };\n        \n        \n                    this._animate({\n                        timing: timing,\n                        draw,\n                        duration: 70 * speed,\n                    }, new Event('flyedUp'));\n                }\n        \n                function accelerate(){\n        \n                    let max = -10;\n        \n                    let timing  = function (timeFraction){\n        \n                            let x = 1.5;\n        \n                            timeFraction = 1 - timeFraction;\n                            //linear\n                            return Math.pow(2, 10 * (timeFraction - 1)) * Math.cos(20 * Math.PI * x / 3 * timeFraction);\n                        },\n        \n                        draw = (progress)=>{\n                            this._deformate(1 - progress);\n                           \n                            if(1 - progress <= max || 1 - progress >= 1){\n                                this.dom.dispatchEvent(new Event('accelerated'));\n                            } else{\n                                max = 1 - progress;\n                            }\n                        };\n        \n        \n                    this._animate({\n                        timing: timing,\n                        draw,\n                        duration: 100 * speed,\n                    });\n                }\n        \n                function prepareToJump(){\n        \n                    let timing  = function (timeFraction){\n        \n                            return timeFraction*(2-timeFraction);\n                        },\n        \n                        draw = (progress)=>{this._deformate(1 - progress);};\n        \n        \n                    this._animate({\n                        timing: timing,\n                        draw,\n                        duration: 50 * speed,\n                    }, new Event('preparedToJump'));\n                }\n            }\n        \n            initiateJumps(){\n        \n                if(!this.opened){\n        \n                    setTimeout(function(){\n        \n                        if(!this.opened){\n        \n                            this.jump();\n                        } else{\n                            this.initiateJumps();\n                        }\n                        \n                    }.bind(this), 200)\n                    return;\n                }\n        \n                this.open();\n            }\n        \n            _constructTransform(){\n                return `translateX(${this.transform.translateX}px) translateY(${this.transform.translateY}px) translateZ(${this.transform.translateZ}px) rotateX(${this.transform.rotateX}deg) rotateY(${this.transform.rotateY}deg) rotateZ(${this.transform.rotateZ}deg) scaleY(${this.transform.scaleY}) scaleX(${this.transform.scaleX}) scaleZ(${this.transform.scaleZ})`;\n            }\n        \n            _deformate(sc){ //sc (scale) 1 - scale = 1; 0 - min deformation; 2 - max deformation\n        \n                let minDef  = 0.6;\n        \n                    sc = minDef + (1 - minDef) * sc\n        \n                let scaleNew = {\n                    y: sc,\n                    x: 1 + (1 - sc)**2 * (sc > 1 ? -1 : 1),\n                    z: 1 + (1 - sc)**2 * (sc > 1 ? -1 : 1),\n                }\n        \n                this.transform.scaleX = scaleNew.x;\n                this.transform.scaleY = scaleNew.y;\n                this.transform.scaleZ = scaleNew.z;\n        \n                this.rebuildDom();\n            }\n        \n            _translateY(y){ // 0 - 1 amount\n        \n                let maxY = window.innerHeight * 0.2,\n                    minY = -window.innerHeight * 0.4;\n        \n                y = Math.abs(maxY - minY) * y + minY;\n        \n                this.transform.translateY = -y;\n        \n                this.rebuildDom();\n            }\n        \n            _animate({timing, draw, duration}, event) {\n        \n                let start = performance.now();\n              \n                requestAnimationFrame(function animate(time) {\n                  // timeFraction goes from 0 to 1\n                  let timeFraction = (time - start) / duration;\n                  if (timeFraction > 1) timeFraction = 1;\n              \n                  // calculate the current animation state\n                  let progress = timing(timeFraction);\n              \n                  draw(progress); // draw it\n              \n                  if (timeFraction < 1) {\n                    requestAnimationFrame(animate.bind(this));\n                  } else if(event){\n                    this.dom.dispatchEvent(event);\n                  }\n              \n                }.bind(this));\n            }\n        }\n        \n        let box = new Box(document.getElementById('skillsBox'));\n    }\n\n    {\n        // Swipe handler\n        \n        document.addEventListener('touchstart', handleTouchStart, false);        \n        document.addEventListener('touchmove', handleTouchMove, false);\n        \n        let xDown = null;                                                        \n        let yDown = null;\n        let alignmentToNav = true;\n        \n        function getTouches(evt) {\n        return evt.touches ||             // browser API\n                evt.originalEvent.touches; // jQuery\n        }                                                     \n        \n        function handleTouchStart(evt) {\n            const firstTouch = getTouches(evt)[0];                                      \n            xDown = firstTouch.clientX;                                      \n            yDown = firstTouch.clientY;        \n        };                                                \n        \n        function handleTouchMove(evt) {\n            if ( ! xDown || ! yDown ) {\n                return;\n            }\n        \n            let xUp = evt.touches[0].clientX;                                    \n            let yUp = evt.touches[0].clientY;\n        \n            let xDiff = xDown - xUp;\n            let yDiff = yDown - yUp;\n        \n            alignmentToNav = (xDown + xUp)*4/3 > window.innerWidth ? true : false;\n            alignmentToNav = xUp < innerWidth/4 ? false : alignmentToNav;\n        \n            if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/\n                if(!alignmentToNav) {\n                    if ( xDiff > 0 ) {\n                        /* left swipe */\n                        document.querySelector('#touch').checked = false;\n                    } else {\n                        /* right swipe */\n                        document.querySelector('#touch').checked = true;\n                    }  \n                } else {\n                    if ( xDiff > 0 ) {\n                        /* left swipe */\n                        document.querySelector('#nav').checked = true;\n                    } else {\n                        /* right swipe */\n                        document.querySelector('#nav').checked = false;\n                    }  \n                }                     \n            } \n            else {\n                if ( yDiff > 0 ) {\n                    /* up swipe */ \n                    // document.querySelector('#touch').checked = false; classList.remove('full-view');\n                } else { \n                    /* down swipe */\n                    // document.querySelector('#touch').checked = false; classList.remove('full-view');\n                }                                                                 \n            }\n            /* reset values */\n            xDown = null;\n            yDown = null;                                             \n        };\n    }\n\n    {\n        \n        addTimeToEmployments();\n        \n        \n        // functions\n        \n        \n        function addTimeToEmployments(){\n            let jobs = document.querySelectorAll('.job'),\n                rembud = jobs[0].querySelector('.job__time'),\n                cpi = jobs[1].querySelector('.job__time'),\n                // boeing = jobs[2].querySelector('.job__time'),\n                now = new Date(),\n                rembudStartDate =  new Date(2018, 6),\n                cpiStartDate = new Date(2017, 10);\n                // boeingStartDate = new Date(2017, 6);\n        \n            rembud.innerHTML = `working within ${getTimeStringFromTo(rembudStartDate, now)}`;    \n            cpi.innerHTML = `sarted ${getTimeStringFromTo(cpiStartDate, now)} ago`;  \n            // boeing.innerHTML = `worked ${getTimeStringFromTo(boeingStartDate, now)} ago`;     \n        }\n        \n        \n        function getTimeStringFromTo(dateObjFrom, dateObjTo = new Date()){\n        \n            let years = 0,\n                months = 0,\n                days = 0,\n                from = new Date(dateObjFrom.getTime()),\n                to = new Date(dateObjTo.getTime());\n        \n            while(from.getDate() != to.getDate()){\n                to.setDate(to.getDate()-1);\n                ++days;\n            }\n            while(from.getMonth() != to.getMonth()){\n                to.setMonth(to.getMonth()-1);\n                ++months;\n            }\n            while(from.getFullYear() != to.getFullYear()){\n                to.setFullYear(to.getFullYear()-1);\n                ++years;\n            }\n            return `${years > 0 ? years + ' year'+ (years == 1 ? \" \" : \"s \") : ''}${months > 0 ?( months + ' month' + (months == 1 ? \" \" : \"s \")) : ''}`;\n        }\n    }\n\n    {\n        let imgs = document.querySelectorAll('.poster__img');\n        // console.log(imgs.length);\n        imgs.forEach( function (img){\n            let imgClass = ((img.naturalWidth / img.naturalHeight) < 1.375) ? 'poster__img--tall' : 'poster__img--wide';\n            // console.log((img.naturalHeight / img.naturalWidth));\n            img.classList.add(imgClass);\n        });\n    }\n\n    {\n        \n        let inputs = document.querySelectorAll('.message__input');\n        inputs.forEach(function(input) {\n            input.addEventListener('input', function() {\n                // console.log(input.value);\n                // console.log(input.value.length);\n                if (input.value.length) {\n                    input.classList.add('filled');\n                } else {\n                    input.classList.remove('filled');\n                }\n            });\n        });\n        \n        // let btn = document.querySelector('#contactsSubmit');\n        // let form = document.querySelector('.contacts');\n        \n        // btn.addEventListener('click', function() {\n        //     form.classList.add('validated');\n        // });\n    }\n\n    {\n        myCarosel();\n        \n        function myCarosel(){\n        \n            let box = document.getElementById('portfolio').querySelector('.portfolio-slider'),\n            slides = box.querySelectorAll('.portfolio-slider>div');\n        \n            // slides.forEach(slide=>{\n            //     slide.style.display = \"inline-block\";\n            // });\n        \n            let width = slides[0].offsetWidth;\n        \n            let h = width/2 * 1 / Math.tan(180 / slides.length * Math.PI / 180);\n        \n            box.style.transform = `rotateY(0deg) translateZ(-${h}px)`;\n        \n            slides.forEach((slide, i)=>{\n                slide.style.cssText = `\n                    transform: rotateY(${360 / slides.length * i}deg)  translateZ(${h}px);\n                `;\n            });\n        \n        \n            //left btn\n        \n            let left = document.getElementById('sliderRotateLeft'),\n                right = document.getElementById('sliderRotateRight'),\n                rotationAngle = 0,\n                rotationStep = 360 / slides.length;\n        \n        \n            left.onclick = ()=>{\n                rotationAngle -= rotationStep;\n                box.style.transform = \"translateZ(-\" + h + \"px) rotateY(\" + rotationAngle + \"deg) \";\n            };\n        \n            right.onclick = ()=>{\n                rotationAngle += rotationStep;\n                box.style.transform = \"translateZ(-\" + h + \"px) rotateY(\" + rotationAngle + \"deg) \";\n            };\n        }\n    }\n})();\n\n//callbacks\n\n\n{\n    let sections = document.querySelectorAll('section');\n    \n    let hui = document.styleSheets[0].rules || document.styleSheets[0].cssRules;\n    \n    let styleBySelector = {};\n    for (let i=0; i<hui.length; i++)\n        styleBySelector[hui[i].selectorText] = hui[i].style;\n    \n    \n    let scrollTimeout;\n    \n    window.addEventListener('scroll', (e)=>{\n    \n        clearTimeout(scrollTimeout);\n        scrollTimeout = setTimeout(changeScrollbarColor, 1000);\n    }, {passive: true});\n    \n    \n    function changeScrollbarColor(){\n    \n    \n        let height = document.documentElement.clientHeight;\n    \n        let scrollHeight = window.pageYOffset;\n    \n        let sectionCounter = 0;\n    \n        while(scrollHeight >= 0){\n            scrollHeight -= sections[sectionCounter].scrollHeight;\n            sectionCounter++;\n        }\n    \n        if(sections[sectionCounter - 1].getBoundingClientRect().bottom > height * 0.4){\n            styleBySelector[\"body::-webkit-scrollbar-thumb\"].backgroundColor = sections[sectionCounter - 1].dataset.scrollbar;\n        } else {\n            styleBySelector[\"body::-webkit-scrollbar-thumb\"].backgroundColor = sections[sectionCounter].dataset.scrollbar;\n        }\n    \n    }\n}"]}