{"version":3,"sources":["main.js"],"names":["Box","[object Object]","box","Door","door","left","this","dom","transform","translateZ","rotateX","rebuildDom","style","_constructTransform","opened","rotateY","rotateZ","scaleY","scaleX","scaleZ","translateX","translateY","window","innerHeight","leftDoor","querySelector","rightDoor","setBox","SetItem","setItem","position","dataset","rotate","scale","superset","supersetBox","SupersetItem","pos","split","Number","amount","minItemWidth","Math","max","PI","min","innerWidth","addEventListener","transition","bind","once","closest","dispatchEvent","Event","items","e","rotateItems","querySelectorAll","forEach","item","index","array","push","length","takePosition","revert","requestAnimationFrame","move","out","displayFullView","initiateJumps","open","flyOut","close","groundSwing","_animate","timing","timeFraction","pow","cos","draw","progress","_deformate","duration","grounding","fallDown","_translateY","flyUp","accelerate","apply","transformOrigin","setTimeout","jump","sc","scaleNew","y","x","z","maxY","minY","abs","event","start","performance","now","animate","time","document","getElementById","evt","firstTouch","touches","originalEvent","getTouches","xDown","clientX","yDown","clientY","xUp","yUp","xDiff","yDiff","alignmentToNav","checked","getTimeStringFromTo","dateObjFrom","dateObjTo","Date","years","months","from","getTime","to","getDate","setDate","getMonth","setMonth","getFullYear","setFullYear","jobs","rembud","cpi","rembudStartDate","cpiStartDate","innerHTML","addTimeToEmployments","img","imgClass","naturalWidth","naturalHeight","classList","add","input","value","remove","slides","h","offsetWidth","tan","slide","i","cssText","right","rotationAngle","rotationStep","onclick","myCarosel","scrollTimeout","sections","hui","styleSheets","rules","cssRules","styleBySelector","selectorText","changeScrollbarColor","height","documentElement","clientHeight","scrollHeight","pageYOffset","sectionCounter","getBoundingClientRect","bottom","backgroundColor","scrollbar","clearTimeout","passive"],"mappings":"AAAA,MACI,aAEA,CACI,MAAMA,EACFC,YAAYC,GAER,MAAMC,EACFF,YAAYG,EAAMC,GAAO,GACrBC,KAAKD,KAAOA,EACZC,KAAKC,IAAMH,EACXE,KAAKE,UAAY,CACbC,WAAYJ,EAAO,GAAK,IACxBK,QAASL,EAAO,IAAM,IAG1BC,KAAKK,aAGTV,sBACI,MAAO,cAAcK,KAAKE,UAAUC,yBAAyBH,KAAKE,UAAUE,cAGhFT,aACIK,KAAKC,IAAIK,MAAMJ,UAAY,GAAGF,KAAKO,wBAGvCZ,OACIK,KAAKE,UAAUE,QAAUJ,KAAKD,KAAO,GAAK,IAC1CC,KAAKK,aAGTV,QACIK,KAAKE,UAAUE,QAAUJ,KAAKD,KAAO,IAAM,GAC3CC,KAAKK,cAgTbL,KAAKC,IAAML,EACXI,KAAKQ,QAAS,EACdR,KAAKE,UAAY,CACbE,QAAU,EACVK,SAAW,GACXC,QAAW,EACXC,OAAU,EACVC,OAAU,EACVC,OAAU,EACVC,WAAc,EACdC,WAAmC,GAArBC,OAAOC,YACrBd,WAAc,GAElBH,KAAKkB,SAAW,IAAIrB,EAAKG,KAAKC,IAAIkB,cAAc,yBAChDnB,KAAKoB,UAAY,IAAIvB,EAAKG,KAAKC,IAAIkB,cAAc,0BAA0B,GAC3EnB,KAAKqB,OAAS,IA3Td,MAEI1B,YAAY0B,GAER,MAAMC,EAEF3B,YAAY4B,EAASC,GAkJjBxB,KAAKC,IAAMsB,EACXvB,KAAKC,IAAIwB,QAAQD,SAAWA,EAC5BxB,KAAKE,UAAY,CACbC,WAAY,EACZuB,OAAQ,EACRC,MAAO,EACPZ,WAAY,GAEhBf,KAAK4B,SAAW,IAxJhB,MAEIjC,YAAYkC,GAER,MAAMC,EAEFnC,YAAY4B,EAASC,GACjBxB,KAAKC,IAAMsB,EACXvB,KAAKC,IAAIwB,QAAQD,SAAWA,EAC5BxB,KAAKE,UAAY,CACbwB,OAAQ,EACRC,MAAO,EACPZ,WAAY,GAKpBpB,sBACI,MAAO,WAAWK,KAAKE,UAAUwB,0BAA0B1B,KAAKE,UAAUa,uBAAuBf,KAAKE,UAAUyB,SAGpHhC,aACIK,KAAKE,UAAUwB,OAAS1B,KAAKE,UAAUwB,QAAU,IAAM1B,KAAKE,UAAUwB,OAAS,IAAM1B,KAAKE,UAAUwB,OAEpG1B,KAAKC,IAAIK,MAAMJ,UAAY,GAAGF,KAAKO,wBACnCP,KAAKC,IAAIkB,cAAc,wBAAwBb,MAAMJ,UAAY,WAAWF,KAAKE,UAAUwB,cAG/F/B,eAEI,IAAIoC,EAAM/B,KAAKC,IAAIwB,QAAQD,SAASQ,MAAM,KAI1C,GAHAhC,KAAKwB,SAAWS,OAAOF,EAAI,IAC3B/B,KAAKkC,OAASD,OAAOF,EAAI,IAEL,GAAjB/B,KAAKwB,SAAc,CAElB,IAAIW,EAAe,GAEnBnC,KAAKE,UAAUa,WAAaqB,KAAKC,IAAIrC,KAAKkC,OAASC,GAAgB,EAAIC,KAAKE,IAAKF,KAAKG,IAAwB,GAApBvB,OAAOwB,WAAuC,GAArBxB,OAAOC,cAC1HjB,KAAKE,UAAUyB,MAAQ,EAEvB3B,KAAKC,IAAIwC,iBAAiB,gBAAiB,WACvCzC,KAAKC,IAAIK,MAAMoC,WAAa,OAC5B1C,KAAKC,IAAIkB,cAAc,wBAAwBb,MAAMoC,WAAa,QACpEC,KAAK3C,MAAM,CAAC4C,MAAM,QAEjB,CAEH,IAAIT,EAAe,GAEnBnC,KAAKE,UAAUa,WAAaqB,KAAKC,IAAIrC,KAAKkC,OAASC,GAAgB,EAAIC,KAAKE,IAAKF,KAAKG,IAAwB,GAApBvB,OAAOwB,WAAuC,GAArBxB,OAAOC,cAC1HjB,KAAKE,UAAUyB,MAAQ,EAEvB3B,KAAKC,IAAIwC,iBAAiB,gBAAiB,WACvCzC,KAAKC,IAAIK,MAAMoC,WAAa,OAC5B1C,KAAKC,IAAIkB,cAAc,wBAAwBb,MAAMoC,WAAa,OAClE1C,KAAKC,IAAI4C,QAAQ,kBAAkBC,cAAc,IAAIC,MAAM,yBAC7DJ,KAAK3C,MAAM,CAAC4C,MAAM,IAGxB5C,KAAKE,UAAUwB,OAAS,IAAM1B,KAAKkC,OAASlC,KAAKwB,SAEjDxB,KAAKK,aAGTV,SACIK,KAAKC,IAAIK,MAAMoC,WAAa,GAE5B1C,KAAKE,UAAUyB,MAAQ,EACvB3B,KAAKE,UAAUa,WAAa,EAC5Bf,KAAKE,UAAUwB,OAAS,EAExB1B,KAAKK,cAIbL,KAAKC,IAAM4B,EACX7B,KAAKE,UAAY,CAEba,WAAY,EACZW,OAAQ,EACRC,MAAO,IAGX3B,KAAKgD,MAAQ,GAEbhD,KAAKC,IAAIwC,iBAAiB,sBAAuB,SAASQ,GACtDjD,KAAKkD,eACPP,KAAK3C,OAEPA,KAAKC,IAAIkD,iBAAiB,mBAAmBC,QAAQ,SAASC,EAAMC,EAAOC,GACvEvD,KAAKgD,MAAMQ,KAAK,IAAI1B,EAAauB,EAAM,GAAGC,KAASC,EAAME,YAC3Dd,KAAK3C,OAEPA,KAAKK,aAGTV,sBACI,MAAO,UAAUK,KAAKE,UAAUwB,yBAAyB1B,KAAKE,UAAUa,uBAAuBf,KAAKE,UAAUyB,SAGlHhC,aACIK,KAAKC,IAAIK,MAAMJ,UAAY,GAAGF,KAAKO,wBAGvCZ,MAEIK,KAAKE,UAAUyB,MAAQ,GAIvB3B,KAAKE,UAAUa,WAAaqB,KAAKC,IAFd,GAEkBrC,KAAKgD,MAAMS,QAAyB,EAAIrB,KAAKE,IAAKF,KAAKG,IAAwB,GAApBvB,OAAOwB,WAAuC,GAArBxB,OAAOC,cAA2C,GAArBD,OAAOC,YAE7JjB,KAAKgD,MAAMI,QAAQC,GAAMA,EAAKK,gBAC9B1D,KAAKK,aAGTV,KAEIK,KAAK0B,QAAS,EACd1B,KAAKE,UAAUyB,MAAQ,GACvB3B,KAAKE,UAAUa,WAAa,EAC5Bf,KAAKgD,MAAMI,QAAQC,GAAMA,EAAKM,UAC9B3D,KAAKK,aAGTV,cACIK,KAAK0B,QAAS,EAEdkC,sBAAsB,SAASC,IAEvB7D,KAAK0B,SAET1B,KAAKgD,MAAMI,QAAQC,IACfA,EAAKnD,UAAUwB,QANZ,GAOH2B,EAAKhD,eAGTuD,sBAAsBC,EAAKlB,KAAK3C,SAClC2C,KAAK3C,SAaiBA,KAAKC,IAAIkB,cAAc,mBAI3DxB,sBACI,MAAO,cAAcK,KAAKE,UAAUa,yBAAyBf,KAAKE,UAAUwB,yBAAyB1B,KAAKE,UAAUC,uBAAuBH,KAAKE,UAAUyB,SAG9JhC,aACIK,KAAKE,UAAUwB,OAAS1B,KAAKE,UAAUwB,QAAU,IAAM1B,KAAKE,UAAUwB,OAAS,IAAM1B,KAAKE,UAAUwB,OAEpG1B,KAAKC,IAAIK,MAAMJ,UAAY,GAAGF,KAAKO,wBACnCP,KAAKC,IAAIkB,cAAc,YAAYb,MAAMJ,UAAY,YAAYF,KAAKE,UAAUwB,cAGpF/B,eAEI,IAAIoC,EAAM/B,KAAKC,IAAIwB,QAAQD,SAASQ,MAAM,KAC1ChC,KAAKwB,SAAWS,OAAOF,EAAI,IAC3B/B,KAAKkC,OAASD,OAAOF,EAAI,IAEL,GAAjB/B,KAAKwB,UAEJxB,KAAKE,UAAUC,WAAaiC,KAAKC,IAAID,KAAKG,IAAI,IAAyB,GAApBvB,OAAOwB,YAAmB,IAC7ExC,KAAKE,UAAUyB,MAAQ,EACvB3B,KAAKE,UAAUa,WAAa,EAE5Bf,KAAKC,IAAIwC,iBAAiB,gBAAiB,WACvCzC,KAAKC,IAAIK,MAAMoC,WAAa,OAC5B1C,KAAKC,IAAIkB,cAAc,YAAYb,MAAMoC,WAAa,QACxDC,KAAK3C,MAAM,CAAC4C,MAAM,MAIpB5C,KAAKE,UAAUC,WAAa,EAC5BH,KAAKE,UAAUyB,MAAQ,KACvB3B,KAAKE,UAAUa,YAAc,GAE7Bf,KAAKC,IAAIwC,iBAAiB,gBAAiB,WACvCzC,KAAKC,IAAIK,MAAMoC,WAAa,OAC5B1C,KAAKC,IAAIkB,cAAc,YAAYb,MAAMoC,WAAa,OACtD1C,KAAKC,IAAI4C,QAAQ,aAAaC,cAAc,IAAIC,MAAM,gBACtD/C,KAAK4B,SAASkC,OAChBnB,KAAK3C,MAAM,CAAC4C,MAAM,KAGxB5C,KAAKE,UAAUwB,OAAS,IAAM1B,KAAKkC,OAASlC,KAAKwB,SAEjDxB,KAAKK,aAGTV,SACIK,KAAKC,IAAIK,MAAMoC,WAAa,GAE5B1C,KAAKE,UAAUC,WAAa,EAC5BH,KAAKE,UAAUyB,MAAQ,EACvB3B,KAAKE,UAAUa,WAAa,EAC5Bf,KAAKE,UAAUwB,OAAS,EAExB1B,KAAKK,cAIbL,KAAKC,IAAMoB,EACXrB,KAAKE,UAAY,CAEba,WAAY,EACZY,MAAO,GAGX3B,KAAKK,aAELL,KAAKgD,MAAQ,GAEbhD,KAAKC,IAAIwC,iBAAiB,cAAe,SAASQ,GAC9CjD,KAAKkD,eACPP,KAAK3C,OAEPA,KAAKC,IAAIkD,iBAAiB,cAAcC,QAAQ,SAASC,EAAMC,EAAOC,GAClEvD,KAAKgD,MAAMQ,KAAK,IAAIlC,EAAQ+B,EAAM,GAAGC,KAASC,EAAME,OAAS,OAC/Dd,KAAK3C,OAGXL,sBACI,MAAO,cAAcK,KAAKE,UAAUa,uBAAuBf,KAAKE,UAAUyB,SAG9EhC,aACIK,KAAKC,IAAIK,MAAMJ,UAAY,GAAGF,KAAKO,wBAGvCZ,SAEIK,KAAKC,IAAIwC,iBAAiB,gBAAiB,WACvCzC,KAAK+D,mBACPpB,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKE,UAAUa,WAAmC,IAArBC,OAAOC,YACpCjB,KAAKE,UAAUyB,MAAQ,IACvB3B,KAAKK,aAGTV,QACIK,KAAKE,UAAUa,WAAa,EAC5Bf,KAAKE,UAAUyB,MAAQ,EACvB3B,KAAKK,aAGTV,kBAEIK,KAAKgD,MAAMI,QAAQC,GAAMA,EAAKK,gBAKlC/D,mBAEIK,KAAK0B,QAAS,EACd1B,KAAKgD,MAAMI,QAAQC,GAAMA,EAAKM,UAIlChE,cACIK,KAAK0B,QAAS,EAEdkC,sBAAsB,SAASC,IAEvB7D,KAAK0B,SAET1B,KAAKgD,MAAMI,QAAQC,IACK,GAAjBA,EAAK7B,WACR6B,EAAKnD,UAAUwB,QAPZ,GAQH2B,EAAKhD,gBAGTuD,sBAAsBC,EAAKlB,KAAK3C,SAClC2C,KAAK3C,SAmBUA,KAAKC,IAAIkB,cAAc,cAEhDnB,KAAKK,aAELL,KAAKgE,gBAGTrE,aAEIK,KAAKC,IAAIK,MAAMJ,UAAY,GAAGF,KAAKO,wBAGvCZ,OACIK,KAAKkB,SAAS+C,OAEdjE,KAAKoB,UAAUnB,IAAIwC,iBAAiB,gBAAiB,WAEjDzC,KAAKqB,OAAO6C,UAEdvB,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKoB,UAAU6C,OAGnBtE,QACIK,KAAKkB,SAASiD,QACdnE,KAAKoB,UAAU+C,QAGnBxE,OAoDI,SAASyE,IAeLpE,KAAKqE,SAAS,CACVC,OAbU,SAAUC,GAMhB,OAFAA,EAAe,EAAIA,EAEZnC,KAAKoC,IAAI,EAAG,IAAMD,EAAe,IAAMnC,KAAKqC,IAAI,GAAKrC,KAAKE,GAJzD,IAIkE,EAAIiC,IAQlFG,KALQC,IAAY3E,KAAK4E,WAAW,EAAID,IAMxCE,SAAU,KACX,IAAI9B,MAAM,kBAGjB,SAAS+B,IAWL9E,KAAKqE,SAAS,CACVC,OATU,SAAUC,GAEpB,OAAO,KAAKA,EAAcA,EAAaA,EAAaA,GAQpDG,KALIC,IAAY3E,KAAK4E,WAAW,EAAID,IAMpCE,SAAU,KACX,IAAI9B,MAAM,aAGjB,SAASgC,IAUL/E,KAAKqE,SAAS,CACVC,OATU,SAAUC,GAEhB,OAAOA,EAAaA,EAAaA,GAQrCG,KALQC,IAAY3E,KAAKgF,YAAY,EAAIL,IAMzCE,SAAU,KACX,IAAI9B,MAAM,eAGjB,SAASkC,IAYLjF,KAAKqE,SAAS,CACVC,OAXU,SAAUC,GAEhB,QAAUA,EAAcA,EAAaA,EAAa,GAUtDG,KAPQC,IACJ3E,KAAKgF,YAAYL,IAOrBE,SAAU,MACX,IAAI9B,MAAM,YAGjB,SAASmC,IAEL,IAAI7C,GAAO,GAsBXrC,KAAKqE,SAAS,CACVC,OArBU,SAAUC,GAMhB,OAFAA,EAAe,EAAIA,EAEZnC,KAAKoC,IAAI,EAAG,IAAMD,EAAe,IAAMnC,KAAKqC,IAAI,GAAKrC,KAAKE,GAJzD,IAIkE,EAAIiC,IAgBlFG,KAbQC,IACJ3E,KAAK4E,WAAW,EAAID,GAEjB,EAAIA,GAAYtC,GAAO,EAAIsC,GAAY,EACtC3E,KAAKC,IAAI6C,cAAc,IAAIC,MAAM,gBAEjCV,EAAM,EAAIsC,GAQlBE,SAAU,MAvJlB7E,KAAKC,IAAIwC,iBAAiB,iBAAkB,SAAUQ,GAGlDiC,EAAWC,MAAMnF,OAEnB2C,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKC,IAAIwC,iBAAiB,cAAe,SAAUQ,GAE/CgC,EAAME,MAAMnF,MACZA,KAAKC,IAAIK,MAAM8E,gBAAkB,uBAEnCzC,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKC,IAAIwC,iBAAiB,UAAW,SAAUQ,GAG3CjD,KAAKC,IAAIK,MAAM8E,gBAAkB,GACjCL,EAASI,MAAMnF,OAEjB2C,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKC,IAAIwC,iBAAiB,aAAc,SAAUQ,GAG9C6B,EAAUK,MAAMnF,OAElB2C,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKC,IAAIwC,iBAAiB,WAAY,SAAUQ,GAG5CmB,EAAYe,MAAMnF,OAEpB2C,KAAK3C,MAAO,CAAC4C,MAAM,IAErB5C,KAAKC,IAAIwC,iBAAiB,gBAAiB,SAAUQ,GAEjDjD,KAAKgE,iBACPrB,KAAK3C,MAAO,CAAC4C,MAAM,IAoHrB,WAUI5C,KAAKqE,SAAS,CACVC,OATU,SAAUC,GAEhB,OAAOA,GAAc,EAAEA,IAQ3BG,KALQC,IAAY3E,KAAK4E,WAAW,EAAID,IAMxCE,SAAU,KACX,IAAI9B,MAAM,oBA/HHoC,MAAMnF,MAmIxBL,gBACIK,KAAKC,IAAIwC,iBAAiB,QAAS,SAAUQ,GAEzCjD,KAAKQ,QAAS,GAEhBmC,KAAK3C,MAAO,CAAC4C,MAAM,IAEjB5C,KAAKQ,OAeTR,KAAKiE,OAbDoB,WAAW,WAEHrF,KAAKQ,OAILR,KAAKgE,gBAFLhE,KAAKsF,QAKX3C,KAAK3C,MAAO,KAOtBL,sBACI,MAAO,cAAcK,KAAKE,UAAUY,4BAA4Bd,KAAKE,UAAUa,4BAA4Bf,KAAKE,UAAUC,yBAAyBH,KAAKE,UAAUE,uBAAuBJ,KAAKE,UAAUO,uBAAuBT,KAAKE,UAAUQ,sBAAsBV,KAAKE,UAAUS,kBAAkBX,KAAKE,UAAUU,kBAAkBZ,KAAKE,UAAUW,UAGzVlB,WAAW4F,GAEP,IAIIC,EAAW,CACXC,EAHAF,EAFU,GAEI,GAAeA,EAI7BG,EAAG,GAAK,EAAIH,IAAK,GAAKA,EAAK,GAAK,EAAI,GACpCI,EAAG,GAAK,EAAIJ,IAAK,GAAKA,EAAK,GAAK,EAAI,IAGxCvF,KAAKE,UAAUU,OAAS4E,EAASE,EACjC1F,KAAKE,UAAUS,OAAS6E,EAASC,EACjCzF,KAAKE,UAAUW,OAAS2E,EAASG,EAEjC3F,KAAKK,aAGTV,YAAY8F,GAER,IAAIG,EAA4B,GAArB5E,OAAOC,YACd4E,EAA6B,IAArB7E,OAAOC,YAEnBwE,EAAIrD,KAAK0D,IAAIF,EAAOC,GAAQJ,EAAII,EAEhC7F,KAAKE,UAAUa,YAAc0E,EAE7BzF,KAAKK,aAGTV,UAAS2E,OAACA,EAAMI,KAAEA,EAAIG,SAAEA,GAAWkB,GAE/B,IAAIC,EAAQC,YAAYC,MAExBtC,sBAAsB,SAASuC,EAAQC,GAErC,IAAI7B,GAAgB6B,EAAOJ,GAASnB,EAChCN,EAAe,IAAGA,EAAe,GAGrC,IAAII,EAAWL,EAAOC,GAEtBG,EAAKC,GAEDJ,EAAe,EACjBX,sBAAsBuC,EAAQxD,KAAK3C,OAC3B+F,GACR/F,KAAKC,IAAI6C,cAAciD,IAGzBpD,KAAK3C,QAIL,IAAIN,EAAI2G,SAASC,eAAe,cAG9C,CAGID,SAAS5D,iBAAiB,cAY1B,SAA0B8D,GACtB,MAAMC,EANV,SAAoBD,GACpB,OAAOA,EAAIE,SACHF,EAAIG,cAAcD,QAIHE,CAAWJ,GAAK,GACnCK,EAAQJ,EAAWK,QACnBC,EAAQN,EAAWO,WAfmC,GAC1DV,SAAS5D,iBAAiB,aAiB1B,SAAyB8D,GACrB,IAAOK,IAAWE,EACd,OAGJ,IAAIE,EAAMT,EAAIE,QAAQ,GAAGI,QACrBI,EAAMV,EAAIE,QAAQ,GAAGM,QAErBG,EAAQN,EAAQI,EAChBG,EAAQL,EAAQG,EAEpBG,EAA+B,GAAbR,EAAQI,GAAO,EAAIhG,OAAOwB,WAC5C4E,IAAiBJ,EAAMxE,WAAW,IAAY4E,EAEzChF,KAAK0D,IAAKoB,GAAU9E,KAAK0D,IAAKqB,KAC3BC,EAWIf,SAASlF,cAAc,QAAQkG,QAF9BH,EAAQ,EANTb,SAASlF,cAAc,UAAUkG,UAFhCH,EAAQ,IA2BrBN,EAAQ,KACRE,EAAQ,QA7D4C,GAExD,IAAIF,EAAQ,KACRE,EAAQ,KACRM,GAAiB,EA6DzB,CAwBI,SAASE,EAAoBC,EAAaC,EAAY,IAAIC,MAEtD,IAAIC,EAAQ,EACRC,EAAS,EAETC,EAAO,IAAIH,KAAKF,EAAYM,WAC5BC,EAAK,IAAIL,KAAKD,EAAUK,WAE5B,KAAMD,EAAKG,WAAaD,EAAGC,WACvBD,EAAGE,QAAQF,EAAGC,UAAU,GAG5B,KAAMH,EAAKK,YAAcH,EAAGG,YACxBH,EAAGI,SAASJ,EAAGG,WAAW,KACxBN,EAEN,KAAMC,EAAKO,eAAiBL,EAAGK,eAC3BL,EAAGM,YAAYN,EAAGK,cAAc,KAC9BT,EAEN,MAAO,GAAGA,EAAQ,EAAIA,EAAQ,SAAmB,GAATA,EAAa,IAAM,MAAQ,KAAKC,EAAS,EAAKA,EAAS,UAAsB,GAAVA,EAAc,IAAM,MAAS,MApC5I,WACI,IAAIU,EAAOhC,SAASlD,iBAAiB,QACjCmF,EAASD,EAAK,GAAGlH,cAAc,cAC/BoH,EAAMF,EAAK,GAAGlH,cAAc,cAE5B+E,EAAM,IAAIuB,KACVe,EAAmB,IAAIf,KAAK,KAAM,GAClCgB,EAAe,IAAIhB,KAAK,KAAM,IAGlCa,EAAOI,UAAY,kBAAkBpB,EAAoBkB,EAAiBtC,KAC1EqC,EAAIG,UAAY,UAAUpB,EAAoBmB,EAAcvC,SAjBhEyC,GA+CWtC,SAASlD,iBAAiB,gBAEhCC,SAAS,SAAUwF,GACpB,IAAIC,EAAaD,EAAIE,aAAeF,EAAIG,cAAiB,MAAS,oBAAsB,oBAExFH,EAAII,UAAUC,IAAIJ,MAMTxC,SAASlD,iBAAiB,mBAChCC,SAAQ,SAAS8F,GACpBA,EAAMzG,iBAAiB,SAAS,WAGxByG,EAAMC,MAAM1F,OACZyF,EAAMF,UAAUC,IAAI,UAEpBC,EAAMF,UAAUI,OAAO,iBAgBnC,WAEI,IAAIxJ,EAAMyG,SAASC,eAAe,aAAanF,cAAc,qBAC7DkI,EAASzJ,EAAIuD,iBAAiB,yBAQ1BmG,EAFQD,EAAO,GAAGE,YAER,EAAI,EAAInH,KAAKoH,IAAI,IAAMH,EAAO5F,OAASrB,KAAKE,GAAK,KAE/D1C,EAAIU,MAAMJ,UAAY,6BAA6BoJ,OAEnDD,EAAOjG,QAAQ,CAACqG,EAAOC,KACnBD,EAAMnJ,MAAMqJ,QAAU,4CACG,IAAMN,EAAO5F,OAASiG,qBAAqBJ,4BAOxE,IAAIvJ,EAAOsG,SAASC,eAAe,oBAC/BsD,EAAQvD,SAASC,eAAe,qBAChCuD,EAAgB,EAChBC,EAAe,IAAMT,EAAO5F,OAGhC1D,EAAKgK,QAAU,KACXF,GAAiBC,EACjBlK,EAAIU,MAAMJ,UAAY,eAAiBoJ,EAAI,eAAiBO,EAAgB,SAGhFD,EAAMG,QAAU,KACZF,GAAiBC,EACjBlK,EAAIU,MAAMJ,UAAY,eAAiBoJ,EAAI,eAAiBO,EAAgB,SAvCpFG,IA7xBR,GA60BA,CACI,IASIC,EATAC,EAAW7D,SAASlD,iBAAiB,WAErCgH,EAAM9D,SAAS+D,YAAY,GAAGC,OAAShE,SAAS+D,YAAY,GAAGE,SAE/DC,EAAkB,GACtB,IAAK,IAAIb,EAAE,EAAGA,EAAES,EAAI1G,OAAQiG,IACxBa,EAAgBJ,EAAIT,GAAGc,cAAgBL,EAAIT,GAAGpJ,MAYlD,SAASmK,uBAGL,IAAIC,EAASrE,SAASsE,gBAAgBC,aAElCC,EAAe7J,OAAO8J,YAEtBC,EAAiB,EAErB,KAAMF,GAAgB,GAClBA,GAAgBX,EAASa,GAAgBF,aACzCE,IAGDb,EAASa,EAAiB,GAAGC,wBAAwBC,OAAkB,GAATP,EAC7DH,EAAgB,iCAAiCW,gBAAkBhB,EAASa,EAAiB,GAAGtJ,QAAQ0J,UAExGZ,EAAgB,iCAAiCW,gBAAkBhB,EAASa,GAAgBtJ,QAAQ0J,UAxB5GnK,OAAOyB,iBAAiB,SAAWQ,IAE/BmI,aAAanB,GACbA,EAAgB5E,WAAWoF,qBAAsB,MAClD,CAACY,SAAS","file":"../main.min.js","sourcesContent":["(()=>{\r\n    'use strict';\r\n\r\n    {\r\n        class Box{\r\n            constructor(box){\r\n        \r\n                class Door{\r\n                    constructor(door, left = true){\r\n                        this.left = left;\r\n                        this.dom = door;\r\n                        this.transform = {\r\n                            translateZ: left ? 0 : -100,\r\n                            rotateX: left ? 270 : 90 //- closed 270 / 90 (open = 60 / 300) \r\n                        }\r\n        \r\n                        this.rebuildDom();\r\n                    }\r\n                    \r\n                    _constructTransform(){\r\n                        return `translateZ(${this.transform.translateZ}px) rotateX(${this.transform.rotateX}deg)`;\r\n                    }\r\n        \r\n                    rebuildDom(){\r\n                        this.dom.style.transform = `${this._constructTransform()}`;\r\n                    }\r\n        \r\n                    open(){\r\n                        this.transform.rotateX = this.left ? 60 : 300;\r\n                        this.rebuildDom();\r\n                    }\r\n        \r\n                    close(){\r\n                        this.transform.rotateX = this.left ? 270 : 90;\r\n                        this.rebuildDom();\r\n                    }\r\n                }\r\n        \r\n                class SetBox{\r\n        \r\n                    constructor(setBox){\r\n                        \r\n                        class SetItem{\r\n        \r\n                            constructor(setItem, position){\r\n        \r\n                                class SupersetBox{\r\n        \r\n                                    constructor(supersetBox){\r\n                                        \r\n                                        class SupersetItem{\r\n                        \r\n                                            constructor(setItem, position){\r\n                                                this.dom = setItem;\r\n                                                this.dom.dataset.position = position;\r\n                                                this.transform = {\r\n                                                    rotate: 0,\r\n                                                    scale: 1,\r\n                                                    translateY: 0\r\n                                                }\r\n                                            }\r\n                                \r\n                                            \r\n                                            _constructTransform(){\r\n                                                return `rotateZ(${this.transform.rotate}deg) translateY(-${this.transform.translateY}px) scale(${this.transform.scale})`;\r\n                                            }\r\n                                \r\n                                            rebuildDom(){\r\n                                                this.transform.rotate = this.transform.rotate >= 360 ? this.transform.rotate - 360 : this.transform.rotate;\r\n                        \r\n                                                this.dom.style.transform = `${this._constructTransform()}`;\r\n                                                this.dom.querySelector('.superset__skill-box').style.transform = `rotate(-${this.transform.rotate}deg) `;\r\n                                            }\r\n                                \r\n                                            takePosition(){\r\n                        \r\n                                                let pos = this.dom.dataset.position.split('-');\r\n                                                this.position = Number(pos[0]);\r\n                                                this.amount = Number(pos[1]);\r\n                        \r\n                                                if(this.position != 0){\r\n        \r\n                                                    let minItemWidth = 70;\r\n                                                    \r\n                                                    this.transform.translateY = Math.max(this.amount * minItemWidth / (2 * Math.PI), Math.min(window.innerWidth * 0.4, window.innerHeight * 0.3));\r\n                                                    this.transform.scale = 1;\r\n                                                    \r\n                                                    this.dom.addEventListener('transitionend', function(){\r\n                                                        this.dom.style.transition = \"none\";\r\n                                                        this.dom.querySelector('.superset__skill-box').style.transition = \"none\";\r\n                                                    }.bind(this),{once: true});\r\n                                                    \r\n                                                } else {\r\n        \r\n                                                    let minItemWidth = 70;\r\n                                                    \r\n                                                    this.transform.translateY = Math.max(this.amount * minItemWidth / (2 * Math.PI), Math.min(window.innerWidth * 0.4, window.innerHeight * 0.3));\r\n                                                    this.transform.scale = 1;\r\n                                                    \r\n                                                    this.dom.addEventListener('transitionend', function(){\r\n                                                        this.dom.style.transition = \"none\";\r\n                                                        this.dom.querySelector('.superset__skill-box').style.transition = \"none\";\r\n                                                        this.dom.closest('.superset__box').dispatchEvent(new Event('rotatesupersetitems'));\r\n                                                    }.bind(this),{once: true});\r\n                                                }\r\n                                                \r\n                                                this.transform.rotate = 360 / this.amount * this.position;\r\n                        \r\n                                                this.rebuildDom();\r\n                                            }\r\n                                \r\n                                            revert(){\r\n                                                this.dom.style.transition = \"\";\r\n                                                \r\n                                                this.transform.scale = 0;\r\n                                                this.transform.translateY = 0;\r\n                                                this.transform.rotate = 0;\r\n                        \r\n                                                this.rebuildDom();\r\n                                            }\r\n                                        }\r\n                        \r\n                                        this.dom = supersetBox;\r\n                                        this.transform = {\r\n                        \r\n                                            translateY: 0,\r\n                                            rotate: 0,\r\n                                            scale: 0.1\r\n                                        }\r\n                        \r\n                                        this.items = [];\r\n                        \r\n                                        this.dom.addEventListener('rotatesupersetitems', function(e){\r\n                                            this.rotateItems();\r\n                                        }.bind(this))\r\n                        \r\n                                        this.dom.querySelectorAll('.superset__item').forEach(function(item, index, array){\r\n                                            this.items.push(new SupersetItem(item, `${index}-${array.length}`));\r\n                                        }.bind(this));\r\n        \r\n                                        this.rebuildDom();\r\n                                    }\r\n                                    \r\n                                    _constructTransform(){\r\n                                        return `rotate(${this.transform.rotate}deg) translateY(${this.transform.translateY}px) scale(${this.transform.scale})`;\r\n                                    }\r\n                        \r\n                                    rebuildDom(){\r\n                                        this.dom.style.transform = `${this._constructTransform()}`;\r\n                                    }\r\n        \r\n                                    out(){\r\n                                        // console.log(this.items);\r\n                                        this.transform.scale = 0.8;\r\n                                        \r\n                                        let minItemWidth = 70;\r\n                                                    \r\n                                        this.transform.translateY = Math.max(this.items.length * minItemWidth / (2 * Math.PI), Math.min(window.innerWidth * 0.4, window.innerHeight * 0.3)) - window.innerHeight * 0.2;\r\n        \r\n                                        this.items.forEach(item=>item.takePosition());\r\n                                        this.rebuildDom();\r\n                                    }\r\n                        \r\n                                    in(){\r\n                        \r\n                                        this.rotate = false;\r\n                                        this.transform.scale = 0.1;\r\n                                        this.transform.translateY = 0;\r\n                                        this.items.forEach(item=>item.revert());\r\n                                        this.rebuildDom();\r\n                                    }\r\n                        \r\n                                    rotateItems(){\r\n                                        this.rotate = true;\r\n                                        let step = 0.2;\r\n                                        requestAnimationFrame(function move(){\r\n                        \r\n                                            if(!this.rotate) return;\r\n                        \r\n                                            this.items.forEach(item=>{\r\n                                                item.transform.rotate += step;\r\n                                                item.rebuildDom();\r\n                                            });\r\n                        \r\n                                            requestAnimationFrame(move.bind(this));\r\n                                        }.bind(this));\r\n                                    }\r\n                                }\r\n        \r\n        \r\n                                this.dom = setItem;\r\n                                this.dom.dataset.position = position;\r\n                                this.transform = {\r\n                                    translateZ: 0,\r\n                                    rotate: 0,\r\n                                    scale: 1,\r\n                                    translateY: 0\r\n                                }\r\n                                this.superset = new SupersetBox(this.dom.querySelector('.superset__box'))\r\n                            }\r\n                \r\n                            \r\n                            _constructTransform(){\r\n                                return `translateY(${this.transform.translateY}px) rotateY(${this.transform.rotate}deg) translateZ(${this.transform.translateZ}px) scale(${this.transform.scale})`;\r\n                            }\r\n                \r\n                            rebuildDom(){\r\n                                this.transform.rotate = this.transform.rotate >= 360 ? this.transform.rotate - 360 : this.transform.rotate;\r\n        \r\n                                this.dom.style.transform = `${this._constructTransform()}`;\r\n                                this.dom.querySelector('.diamond').style.transform = `rotateY(-${this.transform.rotate}deg) `;\r\n                            }\r\n                \r\n                            takePosition(){\r\n        \r\n                                let pos = this.dom.dataset.position.split('-');\r\n                                this.position = Number(pos[0]);\r\n                                this.amount = Number(pos[1]);\r\n        \r\n                                if(this.position != 0){\r\n                                    \r\n                                    this.transform.translateZ = Math.max(Math.min(100, window.innerWidth * 0.2), 75);\r\n                                    this.transform.scale = 1;\r\n                                    this.transform.translateY = 0;\r\n                                    \r\n                                    this.dom.addEventListener('transitionend', function(){\r\n                                        this.dom.style.transition = \"none\";\r\n                                        this.dom.querySelector('.diamond').style.transition = \"none\";\r\n                                    }.bind(this),{once: true});\r\n                                    \r\n                                } else {\r\n        \r\n                                    this.transform.translateZ = 0;\r\n                                    this.transform.scale = 1.25;\r\n                                    this.transform.translateY = -70;\r\n        \r\n                                    this.dom.addEventListener('transitionend', function(){\r\n                                        this.dom.style.transition = \"none\";\r\n                                        this.dom.querySelector('.diamond').style.transition = \"none\";\r\n                                        this.dom.closest('.set__box').dispatchEvent(new Event('rotateitems'));\r\n                                        this.superset.out();\r\n                                    }.bind(this),{once: true});\r\n                                }\r\n                                \r\n                                this.transform.rotate = 360 / this.amount * this.position;\r\n        \r\n                                this.rebuildDom();\r\n                            }\r\n                \r\n                            revert(){\r\n                                this.dom.style.transition = \"\";\r\n                                \r\n                                this.transform.translateZ = 0;\r\n                                this.transform.scale = 0;\r\n                                this.transform.translateY = 0;\r\n                                this.transform.rotate = 0;\r\n        \r\n                                this.rebuildDom();\r\n                            }\r\n                        }\r\n        \r\n                        this.dom = setBox;\r\n                        this.transform = {\r\n        \r\n                            translateY: 0,\r\n                            scale: 1\r\n                        }\r\n        \r\n                        this.rebuildDom();\r\n        \r\n                        this.items = [];\r\n        \r\n                        this.dom.addEventListener('rotateitems', function(e){\r\n                            this.rotateItems();\r\n                        }.bind(this))\r\n        \r\n                        this.dom.querySelectorAll('.set__item').forEach(function(item, index, array){\r\n                            this.items.push(new SetItem(item, `${index}-${array.length - 1}`));\r\n                        }.bind(this));\r\n                    }\r\n                    \r\n                    _constructTransform(){\r\n                        return `translateY(${this.transform.translateY}px) scale(${this.transform.scale})`;\r\n                    }\r\n        \r\n                    rebuildDom(){\r\n                        this.dom.style.transform = `${this._constructTransform()}`;\r\n                    }\r\n        \r\n                    flyOut(){\r\n        \r\n                        this.dom.addEventListener('transitionend', function(){\r\n                            this.displayFullView();\r\n                        }.bind(this), {once: true});\r\n        \r\n                        this.transform.translateY = -window.innerHeight * 0.2;\r\n                        this.transform.scale = 1.5;\r\n                        this.rebuildDom();\r\n                    }\r\n        \r\n                    flyIn(){\r\n                        this.transform.translateY = 0;\r\n                        this.transform.scale = 1;\r\n                        this.rebuildDom();\r\n                    }\r\n        \r\n                    displayFullView(){\r\n                        // console.log(this.items);\r\n                        this.items.forEach(item=>item.takePosition());\r\n        \r\n                        \r\n                    }\r\n        \r\n                    collapseFullView(){\r\n        \r\n                        this.rotate = false;\r\n                        this.items.forEach(item=>item.revert());\r\n                        \r\n                    }\r\n        \r\n                    rotateItems(){\r\n                        this.rotate = true;\r\n                        let step = 0.5;\r\n                        requestAnimationFrame(function move(){\r\n        \r\n                            if(!this.rotate) return;\r\n        \r\n                            this.items.forEach(item=>{\r\n                                if(item.position == 0) return;\r\n                                item.transform.rotate += step;\r\n                                item.rebuildDom();\r\n                            });\r\n        \r\n                            requestAnimationFrame(move.bind(this));\r\n                        }.bind(this));\r\n                    }\r\n                }\r\n        \r\n                this.dom = box;\r\n                this.opened = false;\r\n                this.transform = {\r\n                    rotateX : 0,    //-20\r\n                    rotateY : -80,\r\n                    rotateZ :  0,\r\n                    scaleY :  1,\r\n                    scaleX :  1,\r\n                    scaleZ :  1,\r\n                    translateX :  0,\r\n                    translateY :  window.innerHeight * 0.4,\r\n                    translateZ :  0,\r\n                };\r\n                this.leftDoor = new Door(this.dom.querySelector('.box__side--top-left'));\r\n                this.rightDoor = new Door(this.dom.querySelector('.box__side--top-right'), false);\r\n                this.setBox = new SetBox(this.dom.querySelector('.set__box'));\r\n        \r\n                this.rebuildDom();\r\n                \r\n                this.initiateJumps();\r\n            }\r\n        \r\n            rebuildDom(){\r\n        \r\n                this.dom.style.transform = `${this._constructTransform()}`;\r\n            }\r\n        \r\n            open(){\r\n                this.leftDoor.open();\r\n                \r\n                this.rightDoor.dom.addEventListener('transitionend', function(){\r\n        \r\n                    this.setBox.flyOut();\r\n        \r\n                }.bind(this), {once: true});\r\n                \r\n                this.rightDoor.open();\r\n            }\r\n        \r\n            close(){\r\n                this.leftDoor.close();\r\n                this.rightDoor.close();\r\n            }\r\n        \r\n            jump(){\r\n                \r\n                let speed = 20;\r\n        \r\n                this.dom.addEventListener('preparedToJump', function (e){\r\n                    // console.log('prepared to jump!');\r\n        \r\n                    accelerate.apply(this);\r\n        \r\n                }.bind(this), {once: true});\r\n        \r\n                this.dom.addEventListener('accelerated', function (e){\r\n                    // console.log('accelerated!');\r\n                    flyUp.apply(this);\r\n                    this.dom.style.transformOrigin = \"center center -50px\";\r\n        \r\n                }.bind(this), {once: true});\r\n        \r\n                this.dom.addEventListener('flyedUp', function (e){\r\n                    // console.log('flyedUp!');\r\n        \r\n                    this.dom.style.transformOrigin = \"\";\r\n                    fallDown.apply(this);\r\n        \r\n                }.bind(this), {once: true});\r\n        \r\n                this.dom.addEventListener('falledDown', function (e){\r\n                    // console.log('falledDown!');\r\n        \r\n                    grounding.apply(this);\r\n        \r\n                }.bind(this), {once: true});\r\n        \r\n                this.dom.addEventListener('grounded', function (e){\r\n                    // console.log('grounded!');\r\n        \r\n                    groundSwing.apply(this);\r\n        \r\n                }.bind(this), {once: true});\r\n        \r\n                this.dom.addEventListener('groundSwinged', function (e){\r\n                    // console.log('All Done!');\r\n                    this.initiateJumps();\r\n                }.bind(this), {once: true});\r\n        \r\n                \r\n                prepareToJump.apply(this);\r\n        \r\n        \r\n                // functions\r\n        \r\n        \r\n                function groundSwing(){\r\n        \r\n        \r\n                    let timing  = function (timeFraction){\r\n        \r\n                            let x = 1.5;\r\n        \r\n                            timeFraction = 1 - timeFraction;\r\n                            //linear\r\n                            return Math.pow(2, 10 * (timeFraction - 1)) * Math.cos(20 * Math.PI * x / 3 * timeFraction);\r\n                        },\r\n        \r\n                        draw = (progress)=>{this._deformate(1 - progress);};\r\n        \r\n        \r\n                    this._animate({\r\n                        timing: timing,\r\n                        draw,\r\n                        duration: 100 * speed,\r\n                    }, new Event('groundSwinged'));\r\n                }\r\n        \r\n                function grounding(){\r\n        \r\n                    \r\n                    let timing  = function (timeFraction){\r\n        \r\n                        return 1-(--timeFraction)*timeFraction*timeFraction*timeFraction;\r\n                    },\r\n        \r\n                    draw = (progress)=>{this._deformate(1 - progress);};\r\n        \r\n        \r\n                    this._animate({\r\n                        timing: timing,\r\n                        draw,\r\n                        duration: 10 * speed,\r\n                    }, new Event('grounded'));\r\n                }\r\n        \r\n                function fallDown(){\r\n        \r\n                    let timing  = function (timeFraction){\r\n        \r\n                            return timeFraction*timeFraction*timeFraction;\r\n                        },\r\n        \r\n                        draw = (progress)=>{this._translateY(1 - progress);};\r\n        \r\n        \r\n                    this._animate({\r\n                        timing: timing,\r\n                        draw,\r\n                        duration: 50 * speed,\r\n                    }, new Event('falledDown'));\r\n                }\r\n        \r\n                function flyUp(){\r\n        \r\n                    let timing  = function (timeFraction){\r\n        \r\n                            return (--timeFraction)*timeFraction*timeFraction+1;\r\n                        },\r\n        \r\n                        draw = (progress)=>{\r\n                            this._translateY(progress);\r\n                        };\r\n        \r\n        \r\n                    this._animate({\r\n                        timing: timing,\r\n                        draw,\r\n                        duration: 70 * speed,\r\n                    }, new Event('flyedUp'));\r\n                }\r\n        \r\n                function accelerate(){\r\n        \r\n                    let max = -10;\r\n        \r\n                    let timing  = function (timeFraction){\r\n        \r\n                            let x = 1.5;\r\n        \r\n                            timeFraction = 1 - timeFraction;\r\n                            //linear\r\n                            return Math.pow(2, 10 * (timeFraction - 1)) * Math.cos(20 * Math.PI * x / 3 * timeFraction);\r\n                        },\r\n        \r\n                        draw = (progress)=>{\r\n                            this._deformate(1 - progress);\r\n                           \r\n                            if(1 - progress <= max || 1 - progress >= 1){\r\n                                this.dom.dispatchEvent(new Event('accelerated'));\r\n                            } else{\r\n                                max = 1 - progress;\r\n                            }\r\n                        };\r\n        \r\n        \r\n                    this._animate({\r\n                        timing: timing,\r\n                        draw,\r\n                        duration: 100 * speed,\r\n                    });\r\n                }\r\n        \r\n                function prepareToJump(){\r\n        \r\n                    let timing  = function (timeFraction){\r\n        \r\n                            return timeFraction*(2-timeFraction);\r\n                        },\r\n        \r\n                        draw = (progress)=>{this._deformate(1 - progress);};\r\n        \r\n        \r\n                    this._animate({\r\n                        timing: timing,\r\n                        draw,\r\n                        duration: 50 * speed,\r\n                    }, new Event('preparedToJump'));\r\n                }\r\n            }\r\n        \r\n            initiateJumps(){\r\n                this.dom.addEventListener('click', function (e){\r\n        \r\n                    this.opened = true;\r\n        \r\n                }.bind(this), {once: true});\r\n        \r\n                if(!this.opened){\r\n        \r\n                    setTimeout(function(){\r\n        \r\n                        if(!this.opened){\r\n        \r\n                            this.jump();\r\n                        } else{\r\n                            this.initiateJumps();\r\n                        }\r\n                        \r\n                    }.bind(this), 200)\r\n                    return;\r\n                }\r\n        \r\n                this.open();\r\n            }\r\n        \r\n            _constructTransform(){\r\n                return `translateX(${this.transform.translateX}px) translateY(${this.transform.translateY}px) translateZ(${this.transform.translateZ}px) rotateX(${this.transform.rotateX}deg) rotateY(${this.transform.rotateY}deg) rotateZ(${this.transform.rotateZ}deg) scaleY(${this.transform.scaleY}) scaleX(${this.transform.scaleX}) scaleZ(${this.transform.scaleZ})`;\r\n            }\r\n        \r\n            _deformate(sc){ //sc (scale) 1 - scale = 1; 0 - min deformation; 2 - max deformation\r\n        \r\n                let minDef  = 0.6;\r\n        \r\n                    sc = minDef + (1 - minDef) * sc\r\n        \r\n                let scaleNew = {\r\n                    y: sc,\r\n                    x: 1 + (1 - sc)**2 * (sc > 1 ? -1 : 1),\r\n                    z: 1 + (1 - sc)**2 * (sc > 1 ? -1 : 1),\r\n                }\r\n        \r\n                this.transform.scaleX = scaleNew.x;\r\n                this.transform.scaleY = scaleNew.y;\r\n                this.transform.scaleZ = scaleNew.z;\r\n        \r\n                this.rebuildDom();\r\n            }\r\n        \r\n            _translateY(y){ // 0 - 1 amount\r\n        \r\n                let maxY = window.innerHeight * 0.2,\r\n                    minY = -window.innerHeight * 0.4;\r\n        \r\n                y = Math.abs(maxY - minY) * y + minY;\r\n        \r\n                this.transform.translateY = -y;\r\n        \r\n                this.rebuildDom();\r\n            }\r\n        \r\n            _animate({timing, draw, duration}, event) {\r\n        \r\n                let start = performance.now();\r\n              \r\n                requestAnimationFrame(function animate(time) {\r\n                  // timeFraction goes from 0 to 1\r\n                  let timeFraction = (time - start) / duration;\r\n                  if (timeFraction > 1) timeFraction = 1;\r\n              \r\n                  // calculate the current animation state\r\n                  let progress = timing(timeFraction);\r\n              \r\n                  draw(progress); // draw it\r\n              \r\n                  if (timeFraction < 1) {\r\n                    requestAnimationFrame(animate.bind(this));\r\n                  } else if(event){\r\n                    this.dom.dispatchEvent(event);\r\n                  }\r\n              \r\n                }.bind(this));\r\n            }\r\n        }\r\n        \r\n        let box = new Box(document.getElementById('skillsBox'));\r\n    }\r\n\r\n    {\r\n        // Swipe handler\r\n        \r\n        document.addEventListener('touchstart', handleTouchStart, false);        \r\n        document.addEventListener('touchmove', handleTouchMove, false);\r\n        \r\n        let xDown = null;                                                        \r\n        let yDown = null;\r\n        let alignmentToNav = true;\r\n        \r\n        function getTouches(evt) {\r\n        return evt.touches ||             // browser API\r\n                evt.originalEvent.touches; // jQuery\r\n        }                                                     \r\n        \r\n        function handleTouchStart(evt) {\r\n            const firstTouch = getTouches(evt)[0];                                      \r\n            xDown = firstTouch.clientX;                                      \r\n            yDown = firstTouch.clientY;        \r\n        };                                                \r\n        \r\n        function handleTouchMove(evt) {\r\n            if ( ! xDown || ! yDown ) {\r\n                return;\r\n            }\r\n        \r\n            let xUp = evt.touches[0].clientX;                                    \r\n            let yUp = evt.touches[0].clientY;\r\n        \r\n            let xDiff = xDown - xUp;\r\n            let yDiff = yDown - yUp;\r\n        \r\n            alignmentToNav = (xDown + xUp)*4/3 > window.innerWidth ? true : false;\r\n            alignmentToNav = xUp < innerWidth/4 ? false : alignmentToNav;\r\n        \r\n            if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/\r\n                if(!alignmentToNav) {\r\n                    if ( xDiff > 0 ) {\r\n                        /* left swipe */\r\n                        document.querySelector('#touch').checked = false;\r\n                    } else {\r\n                        /* right swipe */\r\n                        document.querySelector('#touch').checked = true;\r\n                    }  \r\n                } else {\r\n                    if ( xDiff > 0 ) {\r\n                        /* left swipe */\r\n                        document.querySelector('#nav').checked = true;\r\n                    } else {\r\n                        /* right swipe */\r\n                        document.querySelector('#nav').checked = false;\r\n                    }  \r\n                }                     \r\n            } \r\n            else {\r\n                if ( yDiff > 0 ) {\r\n                    /* up swipe */ \r\n                    // document.querySelector('#touch').checked = false; classList.remove('full-view');\r\n                } else { \r\n                    /* down swipe */\r\n                    // document.querySelector('#touch').checked = false; classList.remove('full-view');\r\n                }                                                                 \r\n            }\r\n            /* reset values */\r\n            xDown = null;\r\n            yDown = null;                                             \r\n        };\r\n    }\r\n\r\n    {\r\n        \r\n        addTimeToEmployments();\r\n        \r\n        \r\n        // functions\r\n        \r\n        \r\n        function addTimeToEmployments(){\r\n            let jobs = document.querySelectorAll('.job'),\r\n                rembud = jobs[0].querySelector('.job__time'),\r\n                cpi = jobs[1].querySelector('.job__time'),\r\n                // boeing = jobs[2].querySelector('.job__time'),\r\n                now = new Date(),\r\n                rembudStartDate =  new Date(2018, 6),\r\n                cpiStartDate = new Date(2017, 10);\r\n                // boeingStartDate = new Date(2017, 6);\r\n        \r\n            rembud.innerHTML = `working within ${getTimeStringFromTo(rembudStartDate, now)}`;    \r\n            cpi.innerHTML = `sarted ${getTimeStringFromTo(cpiStartDate, now)} ago`;  \r\n            // boeing.innerHTML = `worked ${getTimeStringFromTo(boeingStartDate, now)} ago`;     \r\n        }\r\n        \r\n        \r\n        function getTimeStringFromTo(dateObjFrom, dateObjTo = new Date()){\r\n        \r\n            let years = 0,\r\n                months = 0,\r\n                days = 0,\r\n                from = new Date(dateObjFrom.getTime()),\r\n                to = new Date(dateObjTo.getTime());\r\n        \r\n            while(from.getDate() != to.getDate()){\r\n                to.setDate(to.getDate()-1);\r\n                ++days;\r\n            }\r\n            while(from.getMonth() != to.getMonth()){\r\n                to.setMonth(to.getMonth()-1);\r\n                ++months;\r\n            }\r\n            while(from.getFullYear() != to.getFullYear()){\r\n                to.setFullYear(to.getFullYear()-1);\r\n                ++years;\r\n            }\r\n            return `${years > 0 ? years + ' year'+ (years == 1 ? \" \" : \"s \") : ''}${months > 0 ?( months + ' month' + (months == 1 ? \" \" : \"s \")) : ''}`;\r\n        }\r\n    }\r\n\r\n    {\r\n        let imgs = document.querySelectorAll('.poster__img');\r\n        // console.log(imgs.length);\r\n        imgs.forEach( function (img){\r\n            let imgClass = ((img.naturalWidth / img.naturalHeight) < 1.375) ? 'poster__img--tall' : 'poster__img--wide';\r\n            // console.log((img.naturalHeight / img.naturalWidth));\r\n            img.classList.add(imgClass);\r\n        });\r\n    }\r\n\r\n    {\r\n        \r\n        let inputs = document.querySelectorAll('.message__input');\r\n        inputs.forEach(function(input) {\r\n            input.addEventListener('input', function() {\r\n                // console.log(input.value);\r\n                // console.log(input.value.length);\r\n                if (input.value.length) {\r\n                    input.classList.add('filled');\r\n                } else {\r\n                    input.classList.remove('filled');\r\n                }\r\n            });\r\n        });\r\n        \r\n        // let btn = document.querySelector('#contactsSubmit');\r\n        // let form = document.querySelector('.contacts');\r\n        \r\n        // btn.addEventListener('click', function() {\r\n        //     form.classList.add('validated');\r\n        // });\r\n    }\r\n\r\n    {\r\n        myCarosel();\r\n        \r\n        function myCarosel(){\r\n        \r\n            let box = document.getElementById('portfolio').querySelector('.portfolio-slider'),\r\n            slides = box.querySelectorAll('.portfolio-slider>div');\r\n        \r\n            // slides.forEach(slide=>{\r\n            //     slide.style.display = \"inline-block\";\r\n            // });\r\n        \r\n            let width = slides[0].offsetWidth;\r\n        \r\n            let h = width/2 * 1 / Math.tan(180 / slides.length * Math.PI / 180);\r\n        \r\n            box.style.transform = `rotateY(0deg) translateZ(-${h}px)`;\r\n        \r\n            slides.forEach((slide, i)=>{\r\n                slide.style.cssText = `\r\n                    transform: rotateY(${360 / slides.length * i}deg)  translateZ(${h}px);\r\n                `;\r\n            });\r\n        \r\n        \r\n            //left btn\r\n        \r\n            let left = document.getElementById('sliderRotateLeft'),\r\n                right = document.getElementById('sliderRotateRight'),\r\n                rotationAngle = 0,\r\n                rotationStep = 360 / slides.length;\r\n        \r\n        \r\n            left.onclick = ()=>{\r\n                rotationAngle -= rotationStep;\r\n                box.style.transform = \"translateZ(-\" + h + \"px) rotateY(\" + rotationAngle + \"deg) \";\r\n            };\r\n        \r\n            right.onclick = ()=>{\r\n                rotationAngle += rotationStep;\r\n                box.style.transform = \"translateZ(-\" + h + \"px) rotateY(\" + rotationAngle + \"deg) \";\r\n            };\r\n        }\r\n    }\r\n})();\r\n\r\n//callbacks\r\n\r\n\r\n{\r\n    let sections = document.querySelectorAll('section');\r\n    \r\n    let hui = document.styleSheets[0].rules || document.styleSheets[0].cssRules;\r\n    \r\n    let styleBySelector = {};\r\n    for (let i=0; i<hui.length; i++)\r\n        styleBySelector[hui[i].selectorText] = hui[i].style;\r\n    \r\n    \r\n    let scrollTimeout;\r\n    \r\n    window.addEventListener('scroll', (e)=>{\r\n    \r\n        clearTimeout(scrollTimeout);\r\n        scrollTimeout = setTimeout(changeScrollbarColor, 1000);\r\n    }, {passive: true});\r\n    \r\n    \r\n    function changeScrollbarColor(){\r\n    \r\n    \r\n        let height = document.documentElement.clientHeight;\r\n    \r\n        let scrollHeight = window.pageYOffset;\r\n    \r\n        let sectionCounter = 0;\r\n    \r\n        while(scrollHeight >= 0){\r\n            scrollHeight -= sections[sectionCounter].scrollHeight;\r\n            sectionCounter++;\r\n        }\r\n    \r\n        if(sections[sectionCounter - 1].getBoundingClientRect().bottom > height * 0.4){\r\n            styleBySelector[\"body::-webkit-scrollbar-thumb\"].backgroundColor = sections[sectionCounter - 1].dataset.scrollbar;\r\n        } else {\r\n            styleBySelector[\"body::-webkit-scrollbar-thumb\"].backgroundColor = sections[sectionCounter].dataset.scrollbar;\r\n        }\r\n    \r\n    }\r\n}"]}